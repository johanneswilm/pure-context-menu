"use strict";var r=!1,c={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",itemClass:"dropdown-item",zIndex:"9999",preventCloseOnClick:!1,show:m=>!0},h=class{s;n;t;i;constructor(t,e,n){this.n=e,this.s=t,this.t=Object.assign(c,n),t.oncontextmenu=this.o,r||(document.addEventListener("click",this.l),r=!0)}static updateDefaultOptions(t){c=Object.assign(c,t)}static getDefaultOptions(){return c}c=()=>{let t=document.createElement("ul");t.style.minWidth="120px",t.style.maxWidth="240px",t.style.display="block",t.classList.add(this.t.contextMenuClass),t.classList.add(this.t.dropdownClass);for(let e of this.n){let n=document.createElement("li");if(e==="-"){let s=document.createElement("hr");s.classList.add(this.t.dividerClass),n.appendChild(s)}else{let s=document.createElement("a");s.innerText=e.label,s.style.cursor="pointer",s.style.whiteSpace="normal",s.classList.add(this.t.itemClass),n.appendChild(s)}t.appendChild(n)}return t};d=(t,e,n)=>{let s=this.s,l=window.getComputedStyle(n),o=parseInt(l.borderWidth)+1,i=s.getBoundingClientRect(),u=t,p=e;["BODY","HTML"].includes(s.tagName)||(u-=i.left,p-=i.top);let f=parseInt(l.width),C=u+f>s.clientWidth,x=p+n.clientHeight>s.clientHeight,d=t,a=e;return C&&(d=s.clientWidth-f-o,["BODY","HTML"].includes(s.tagName)||(d+=i.left)),x&&(a=s.clientHeight-n.clientHeight-o,["BODY","HTML"].includes(s.tagName)||(a+=i.top)),{normalizedX:d,normalizedY:a}};e=()=>{document.querySelector(`.${this.t.contextMenuClass}`)?.remove()};a=t=>{this.n.forEach((e,n)=>{if(e==="-")return;let s=t.children[n];s.onclick=()=>{e.callback(this.i),(e.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.e()}})};o=t=>{if(!this.t.show(t))return;t.preventDefault(),t.stopPropagation(),this.i=t,this.e();let e=this.c();document.querySelector("body").append(e),e.style.position="fixed",e.style.zIndex=this.t.zIndex;let{clientX:n,clientY:s}=t,{normalizedX:l,normalizedY:o}=this.d(n,s,e);e.style.top=`${o}px`,e.style.left=`${l}px`,e.oncontextmenu=i=>i.preventDefault(),this.a(e)};l=t=>{t.target.closest(`.${this.t.contextMenuClass}`)||this.e()};off(){this.e(),document.removeEventListener("click",this.l),r=!1,this.s.oncontextmenu=null}},g=h;export{g as default};
//# sourceMappingURL=pure-context-menu.min.js.map
