"use strict";var r=!1,c={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",itemClass:"dropdown-item",zIndex:"9999",preventCloseOnClick:!1},h=class{s;i;t;n;constructor(t,e,i){this.i=e,this.s=t,this.t=Object.assign(c,i),t.oncontextmenu=this.o,r||(document.addEventListener("click",this.l),r=!0)}static updateDefaultOptions(t){c=Object.assign(c,t)}static getDefaultOptions(){return c}c=()=>{let t=document.createElement("ul");t.style.minWidth="120px",t.style.maxWidth="240px",t.style.display="block",t.classList.add(this.t.contextMenuClass),t.classList.add(this.t.dropdownClass);for(let e of this.i){let i=document.createElement("li");if(e==="-"){let s=document.createElement("hr");s.classList.add(this.t.dividerClass),i.appendChild(s)}else{let s=document.createElement("a");s.innerText=e.label,s.style.cursor="pointer",s.style.whiteSpace="normal",s.classList.add(this.t.itemClass),i.appendChild(s)}t.appendChild(i)}return t};d=(t,e,i)=>{let s=this.s,l=2,n=s.getBoundingClientRect(),o=t-n.left,p=e-n.top;["BODY","HTML"].includes(s.tagName)&&(o+=n.left,p+=n.top);let u=o+i.clientWidth>s.clientWidth,f=p+i.clientHeight>s.clientHeight,d=t,a=e;return u&&(d=s.clientWidth-i.clientWidth-l,["BODY","HTML"].includes(s.tagName)||(d+=n.left)),f&&(a=s.clientHeight-i.clientHeight-l,["BODY","HTML"].includes(s.tagName)||(a+=n.top)),{normalizedX:d,normalizedY:a}};e=()=>{document.querySelector(`.${this.t.contextMenuClass}`)?.remove()};a=t=>{this.i.forEach((e,i)=>{if(e==="-")return;let s=t.children[i];s.onclick=()=>{e.callback(this.n),(e.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.e()}})};o=t=>{t.preventDefault(),t.stopPropagation(),this.n=t,this.e();let e=this.c();document.querySelector("body").append(e);let{clientX:i,clientY:s}=t,{normalizedX:l,normalizedY:n}=this.d(i,s,e);e.style.position="fixed",e.style.zIndex=this.t.zIndex,e.style.top=`${n}px`,e.style.left=`${l}px`,e.oncontextmenu=o=>o.preventDefault(),this.a(e)};l=t=>{t.target.closest(`.${this.t.contextMenuClass}`)||this.e()};off(){this.e(),document.removeEventListener("click",this.l),r=!1,this.s.oncontextmenu=null}},C=h;export{C as default};
//# sourceMappingURL=pure-context-menu.min.js.map
